{% extends 'warrant_form/base.html' %}
{% load static %}

{% block title %}Warrant Form{% endblock %}
{% block form %}
{% if status == "error" %}
<h3>ข้อมูลที่กรอกมีข้อผิดพลาด</h3>
{% endif %}

<form id="awis-form" onsubmit="confirmForm()" action="/submit/" method="post">
    {% csrf_token %}
    
    <h3>Required in API</h3>
    <p>Court Code: {{ form.court_code }}</p>
    <p>Req Year: {{ form.req_year }}</p>
    <p>Req Case Type ID: {{ form.req_case_type_id }}</p>
    <p>Police Station ID: {{ form.police_station_id }}</p>
    <p>Req No Plaintiff: {{ form.req_no_plaintiff }}</p>

    <h3>Possibly need to be randomly generated via specific Algorithm</h3>
    <p>Create UID (UID that created this form) {{ form.create_uid }}</p>

    <h3>Currently does not exist in API.</h3>
    <p>Court Name: {{ form.court_name }}</p>

    <p>ความอาญาระหว่าง</p>
    <p>{{ form.plaintiff }} ผู้ร้อง</p>
    <p>{{ form.accused }} ผู้ต้องหา</p>

    <p>ข้าพเจ้า {{ form.req_name }} ตำแหน่ง {{ form.req_pos }}</p>
    <p>อายุ {{ form.req_age }} ปี สถานที่ทำงาน {{ form.req_office }}</p>
    <p>ตำบล/แขวง {{ form.req_sub_district }} อำเภอ/เขต {{ form.req_district }}</p>
    <p>จังหวัด {{ form.req_province }} โทรศัพท์ {{ form.req_tel }}</p>
    <p>ขอทำคำร้องขอออกหมายจับยื่นต่อศาลดังต่อไปนี้</p>

    <p>ข้อ 1. ด้วย</p>
    <p>{{ form.cause_type_id_1 }} {{ form.cause_text_1 }} มาแจ้งความร้องทุกข์ต่อพนักงานสืบสวน</p>
    <p>{{ form.cause_type_id_2 }} ปรากฎจากการสืบสวนของ {{ form.cause_text_2 }}</p>

    <p>ว่า {{ form.acc_full_name }} เลขบัตรประชาชน {{ form.acc_card_id }}</p>
    <p>อายุ {{ form.acc_age }} เชื้อชาติ {{ form.acc_origin }} สัญชาติ {{ form.acc_nation }} อาชีพ {{ form.acc_occupation }}</p>
    <p>อยู่บ้านเลขที่ {{ form.acc_addno }} หมู่ที่ {{ form.acc_vilno }} ถนน {{ form.acc_road }}</p>
    <p>ตรอก/ซอย {{ form.acc_soi }} ใกล้เคียง {{ form.acc_near }} จังหวัด {{ form.acc_province }}</p>
    <p>อำเภอ/เขต {{ form.acc_district }} ตำบล/แขวง {{ form.acc_sub_district }} โทรศัพท์ {{ form.acc_tel }}</p>

    <p>{{ form.charge_type_1 }} ได้หรือน่าจะได้กระทำความผิดอาญาร้ายแรงซึ่งมีอัตราโทษจำคุกอย่างสูงเกิน 3 ปี</p>
    <p>{{ form.charge_type_2 }} ได้หรือน่าจะได้กระทำความผิดอาญา และน่าจะหลบหนีหรือจะไปยุ่งเหยิงกับพยานหลักฐานหรือก่ออันตรายประการอื่น</p>
    <p>เหตุเกิดที่ {{ form.scene }}</p>
    <p>เมื่อวันที่ {{ form.scene_date_day }} เดือน {{ form.scene_date_month }} พ.ศ. {{ form.scene_date_year }} เวลา {{form.scene_date_timehalf}} นาฬิกา</p>

    <p>มีพฤติการณ์กระทำความผิดที่เกี่ยวกับเหตุออกหมายจับคือ {{ form.act }} (cause_text?)</p>
    <p>เป็นการกระทำความผิดฐาน {{ form.charge }} (act?)</p>

    <p>ตามกฎหมาย {{ form.law }} ซึ่งเป็นคดีที่อยู่ในอำนาจศาล {{ form.court_owner_code }} </p>
    <p>รายละเอียดข้อมูลและพยานหลักฐาน ปรากฎตามที่เอกสารที่แนบมาพร้อมนี้</p>

    <p>ข้อ 2. ผู้ประสงค์จะทำการจับกุม {{ form.accused............... }}</p>
    <p>จึงขอให้ศาลออกหมายจับ {{ form.accused.................... }} มาดำเนินคดี</p>
    <p>ในการยื่นคำร้องนี้ ผู้ร้องได้มอบหมายให้ {{ form.agent_name }}</p>
    <p>ตำแหน่ง {{ form.agent_pos }} ซึ่งเป็นผู้ใต้บังคับบัญชา เป็นผู้นำคำร้องมายื่นต่อศาล และหากศาลเรียกสอบถามเมื่อใด ผู้ร้องพร้อมจะมาให้ศาลสอบในทันที</p>
    <p>ผู้ร้อง {{ form.have_req_1 }} เคย {{ form.have_req_2 }} ไม่เคย ร้องขอให้ศาล {{ form.have_court_code }} ออกหมายจับ</p>
    <p>บุคคลดังกล่าว โดยอาศัยเหตุแห่งการร้องขอเดียวกันนี้ หรือเหตุอื่น (ระบุ) {{ form.have_act }}</p>
    <p>และศาลสั่งว่า {{ form.have_injunc }} </p>
    <p>อายุความ {{ form.prescription}} (optional)</p>
    <p></p>

    <p>ควรมิควรแล้วแต่จะโปรด</p>

    <p>(ลงชื่อ) {{ form.plaintiff }} ผู้ร้อง</p>

    <p>คำร้องฉบับนี้ข้าพเจ้า {{ form.composer_name }}</p>
    <p>ตำแหน่ง {{ form.composer_position }} เป็นผู้เรียง</p>
    <p>(ลงชื่อ) ........................ ผู้เรียง</p>
    <p>คำร้องฉบับนี้ข้าพเจ้า {{ form.writer_name }}</p>
    <p>ตำแหน่ง {{ form.writer_position }} เป็นผู้เรียง</p>
    <p>(ลงชื่อ) ........................ ผู้พิมพ์/เขียน</p>
    
    <button type="submit">Next</button>
</form>
{% endblock %}

{% block script %}
<script>
    const year_selector = document.getElementById("id_main_form-scene_date_year");
    const awis_form = document.getElementById("awis-form");

    let is_submitting_form = false;
</script>
<script>
    function adjustYearToLatest() {
        year_selector.value = new Date().getFullYear();
    }
    adjustYearToLatest();
</script>
<script>
// EVENT LISTENERS
awis_form.addEventListener("submit", function () {
    is_submitting_form = true;
});
window.addEventListener("beforeunload", function (e) {
    if (!is_submitting_form) {
        e.preventDefault();
        e.returnValue = ""; 
    }
});
</script>
{% endblock %}